<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eternatus Calculator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a202c;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4 bg-slate-950">
    <div class="bg-slate-900 text-gray-100 p-8 rounded-2xl shadow-2xl w-full max-w-md">
        <h1 class="text-3xl font-bold mb-6 text-center text-cyan-400">Eternatus Power-Up & Move Calculator</h1>
        <p class="text-sm text-center mb-8 text-slate-300">
            Determine whether to power up your Eternatus or use candies for a max move.
        </p>

        <div class="space-y-6">
            <div>
                <label for="attackIV" class="block text-sm font-medium text-gray-300">Attack IV:</label>
                <select id="attackIV" class="mt-1 block w-full px-4 py-2 bg-slate-800 border border-slate-700 rounded-md shadow-sm text-gray-300 focus:outline-none focus:ring-cyan-600 focus:border-cyan-600 transition duration-150 ease-in-out">
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                </select>
            </div>

            <div>
                <label for="candiesAvailable" class="block text-sm font-medium text-gray-300">Candies Available:</label>
                <input type="number" id="candiesAvailable" placeholder="e.g., 200" class="mt-1 block w-full px-4 py-2 bg-slate-800 border border-slate-700 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-cyan-600 focus:border-cyan-600 transition duration-150 ease-in-out">
            </div>
            
            <div>
                <label for="xlCandiesAvailable" class="block text-sm font-medium text-gray-300">XL Candies Available:</label>
                <input type="number" id="xlCandiesAvailable" placeholder="e.g., 50" class="mt-1 block w-full px-4 py-2 bg-slate-800 border border-slate-700 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-cyan-600 focus:border-cyan-600 transition duration-150 ease-in-out">
            </div>
        </div>

        <button id="calculateBtn" class="mt-8 w-full bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-3 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-cyan-600 focus:ring-offset-2 focus:ring-offset-slate-900">
            Calculate Best Option
        </button>

        <div id="resultsOutput" class="mt-8 p-4 bg-slate-800 rounded-lg text-center text-gray-300 border border-slate-700 hidden">
            <p>Awaiting calculation logic...</p>
        </div>

        <div class="mt-8 text-center">
            <p class="text-xs text-cyan-400">
                Data source: <a href="https://old.reddit.com/r/TheSilphRoad/comments/1mv8vm6/an_analysis_of_eternatus_max_move_vs_levelup/" target="_blank" class="underline hover:text-cyan-300 transition-colors duration-150">An Analysis of Eternatus: Max Move vs. Level-up</a> by user "technoxenoholic" on Reddit.
            </p>
        </div>
    </div>

    <script>
        // Get references to the HTML elements
        const calculateBtn = document.getElementById('calculateBtn');
        const resultsOutput = document.getElementById('resultsOutput');

        // Define the candy thresholds for each Attack IV
        // This makes the code cleaner and easier to update in the future
        const candyThresholds = {
            10: {
                levelUpOnly: 1859,
                dc2: 1860,
                dc3: 3480
            },
            11: {
                levelUpOnly: 2009,
                dc2: 2010,
                dc3: 3390
            },
            12: {
                levelUpOnly: 2009,
                dc2: 2010,
                dc3: 3390
            },
            // Updated logic for Attack IV 13
            13: {
                levelUpOnly: 1859,
                dc2: 2010,
                dc3: 3390
            },
            14: {
                levelUpOnly: 2009,
                dc2: 2010,
                dc3: 3390
            },
            15: {
                levelUpOnly: 2009,
                dc2: 2010,
                dc3: 3390
            }
        };

        // Add a click event listener to the button
        calculateBtn.addEventListener('click', () => {
            // Get the values from the input fields
            const attackIV = parseInt(document.getElementById('attackIV').value);
            const candiesAvailable = parseFloat(document.getElementById('candiesAvailable').value);
            const xlCandiesAvailable = parseFloat(document.getElementById('xlCandiesAvailable').value);

            // Show the results area
            resultsOutput.style.display = 'block';

            // Check if inputs are valid numbers
            if (isNaN(candiesAvailable) || isNaN(xlCandiesAvailable)) {
                resultsOutput.innerHTML = `<p class="text-red-400">Please enter valid numbers in all fields.</p>`;
                return;
            }

            // Get the correct candy thresholds for the selected Attack IV
            const thresholds = candyThresholds[attackIV];
            let resultMessage = '';

            if (!thresholds) {
                 resultMessage = `<p class="text-red-400">Invalid Attack IV selected.</p>`;
            } else {
                switch (true) {
                    // Case 1: Power up levels only
                    case (candiesAvailable <= thresholds.levelUpOnly):
                        resultMessage = `
                            <p class="text-xl font-semibold mb-2 text-cyan-300">Option: Power Up Levels Only</p>
                            <p>With ${candiesAvailable} candies, you should only power up Eternatus' levels. Do not use your candies on Dynamax Cannon Level 2 or Level 3 at this time.</p>
                        `;
                        break;
                    // Case 2: DC2 and then power up levels
                    case (candiesAvailable >= thresholds.dc2 && candiesAvailable <= thresholds.dc3 - 1):
                        resultMessage = `
                            <p class="text-xl font-semibold mb-2 text-cyan-300">Option: Max Move & Power Up</p>
                            <p>With ${candiesAvailable} candies, you should first teach Eternatus Dynamax Cannon Level 2, and then use the remaining candies to power up its levels.</p>
                        `;
                        break;
                    // Case 3: DC3 and then power up levels
                    case (candiesAvailable >= thresholds.dc3):
                        if (xlCandiesAvailable >= 320) {
                            resultMessage = `
                                <p class="text-xl font-semibold mb-2 text-cyan-300">Option: Max Move & Power Up (Advanced)</p>
                                <p>With your ${candiesAvailable} candies and ${xlCandiesAvailable} XL candies, you should first teach Eternatus Dynamax Cannon Level 3 and then use the remaining candies to power up its levels.</p>
                            `;
                        } else {
                            resultMessage = `
                                <p class="text-xl font-semibold mb-2 text-cyan-300">Option: Max Move & Power Up</p>
                                <p>You have enough standard candies for a max move, but not enough XL candies for the most powerful option.</p>
                                <p>First, teach Eternatus Dynamax Cannon Level 2, and then use the remaining candies to power up its levels.</p>
                                <p class="text-sm mt-4 text-cyan-400">Note: To unlock Dynamax Cannon Level 3, you need 320 XL candies. This would be a better option than powering up your Eternatus past level 40.</p>
                            `;
                        }
                        break;
                    default:
                        resultMessage = `<p class="text-red-400">The number of candies entered does not fit the provided rules.</p>`;
                        break;
                }

                // Add the note for Attack IV 10
                if (attackIV === 10) {
                    resultMessage += `
                        <p class="text-xs mt-4 text-slate-400">
                            10 attack iv eternatus is still going to do 98.4% as much damage as a 15 attack iv eternatus in the max phase. your eternatus is a beast.
                        </p>
                    `;
                }
            }
            
            // Display the final result
            resultsOutput.innerHTML = resultMessage;
        });
    </script>
</body>
</html>
